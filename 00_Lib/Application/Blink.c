/*
 *
 *
 *  Created on:
 *      Author: belyaev
 */
//*******************************************************************************************
//*******************************************************************************************

#include "Blink.h"

//*******************************************************************************************
//*******************************************************************************************

static volatile uint32_t blinkReg   = 0;
static volatile uint32_t blinkCount = 0;

//*******************************************************************************************
//*******************************************************************************************
void Blink_ResetCount(void){

	blinkCount = 0;
}
//***********************************************************
//Процесс для синхронного мигания светодиодами.
void Blink_Loop(void){
	
	++blinkCount;
	if((blinkCount % 50)   == 0) blinkReg ^= (1 << INTERVAL_50_mS);
	if((blinkCount % 100)  == 0) blinkReg ^= (1 << INTERVAL_100_mS);
	if((blinkCount % 250)  == 0) blinkReg ^= (1 << INTERVAL_250_mS);
	if((blinkCount % 500)  == 0) blinkReg ^= (1 << INTERVAL_500_mS);
	if((blinkCount % 1000) == 0)
	{
		blinkReg  ^= (1 << INTERVAL_1000_mS);
		blinkCount = 0;
	}
}
//***********************************************************
uint32_t Blink(BlinkIntervalEnum_t interval){
	
	if(blinkReg & (1 << interval)) return 1;
	return 0;
}
//*******************************************************************************************
//*******************************************************************************************


