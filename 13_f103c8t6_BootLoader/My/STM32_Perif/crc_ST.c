/*
 * crc_ST.c
 *
 *  Created on: 9 мар. 2023 г.
 *      Author: belyaev
 */
//*******************************************************************************************
//*******************************************************************************************

#include "crc_ST.h"

//*******************************************************************************************
//*******************************************************************************************


//*******************************************************************************************
//*******************************************************************************************
//*******************************************************************************************
//*******************************************************************************************
// Function    	: CRC_Init()
// Description	: Функция инициализации модуля crc
// Parameters  	:
// RetVal      	:
//*****************************************
void CRC_Init(void){

	//Включаем модуль CRC
	RCC->AHBENR |= RCC_AHBENR_CRCEN;
}
//**********************************************************
// Function		: CRC_CalcCrc()
// Description	: расчет контрольной суммы
// Parameters	: addr - адрес (кратен 4м) области, с которого начинаем считать CRC
//				  size - размер (кратен 4м) области, для которой считаем CRC
// RetVal		: crc области данных
//*****************************************
uint32_t CRC_CalcCrc(uint32_t *data, uint32_t size){

	//Сброс счетчика CRC
	CRC->CR |= CRC_CR_RESET;
	//Считаем CRC
	for(uint32_t i=0; i < size; i+=4)
	{
		CRC->DR = *(uint32_t*)(data + i);
	}
	//Читаем контрольную сумму и возвращаем её
	return CRC->DR;
}
//*******************************************************************************************
//*******************************************************************************************
//*******************************************************************************************
//*******************************************************************************************
